import { useState } from 'react';
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { Send, Sparkles } from 'lucide-react';

const quickActions = [
  'Look around',
  'Check inventory',
  'Talk to someone',
  'Search for danger',
  'Rest and heal'
];

export default function ActionInput({ onAction, isLoading, disabled }) {
  const [action, setAction] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    if (action.trim() && !isLoading && !disabled) {
      onAction(action.trim());
      setAction('');
    }
  };

  const handleQuickAction = (quickAction) => {
    if (!isLoading && !disabled) {
      onAction(quickAction);
    }
  };

  return (
    <div className="space-y-3">
      {/* Quick Actions */}
      <div className="flex flex-wrap gap-2">
        {quickActions.map((qa) => (
          <button
            key={qa}
            onClick={() => handleQuickAction(qa)}
            disabled={isLoading || disabled}
            className="px-3 py-1.5 text-xs font-medium bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 hover:border-amber-600/30 text-slate-300 hover:text-amber-200 rounded-full transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5"
          >
            <Sparkles className="w-3 h-3" />
            {qa}
          </button>
        ))}
      </div>

      {/* Main Input */}
      <form onSubmit={handleSubmit} className="flex gap-3">
        <div className="flex-1 relative">
          <Textarea
            value={action}
            onChange={(e) => setAction(e.target.value)}
            placeholder="What do you do next..."
            disabled={isLoading || disabled}
            onKeyDown={(e) => {
              if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSubmit(e);
              }
            }}
            className="min-h-[56px] max-h-32 bg-slate-800/50 border-slate-700/50 text-amber-100 placeholder:text-slate-500 rounded-xl resize-none focus:ring-amber-500/50 focus:border-amber-500/50 pr-4"
          />
        </div>
        <Button
          type="submit"
          disabled={!action.trim() || isLoading || disabled}
          className="h-14 w-14 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 rounded-xl shadow-lg shadow-amber-900/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
        >
          <Send className="w-5 h-5" />
        </Button>
      </form>
    </div>
  );
}
